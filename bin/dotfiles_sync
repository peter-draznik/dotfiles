#!/usr/bin/env bash

e_header "Syncing dotfiles"

if [[ ! -d ~/.dotfiles ]]; then
    new_dotfiles_install=1
else
    read -p "Overwrite existing dotfiles? (y/n) " -n 1;
    echo "";
    if [[ $REPLY =~ ^[Nn]$ ]]; then
        e_error "Aborting"
        exit;
    fi
fi

rsync -a --exclude ".git/" --exclude ".DS_Store" --exclude "bootstrap.sh" \
    --exclude "README.md" --exclude "LICENSE-MIT.txt" ../ ~/

if [[ "$new_dotfiles_install" != 1 ]]; then
    e_header "Removing old dotfiles"
    rm -rf ~/.dotfiles
fi

mv ~/dotfiles ~/.dotfiles

e_success "Updated dotfiles folder"